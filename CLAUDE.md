# 🚀 Flux Studio - 확장 가능한 개발 원칙

## ⚠️ 핵심 개발 원칙

### 🎯 **절대 원칙: 확장 가능성 우선**
- **어떤 작업을 하더라도 확장 가능하게 해야 함**
- **그냥 작업하면 절대 안됨**
- 모든 기능은 모듈화되고 플러그인 방식으로 구현

---

## 📁 템플릿 시스템 구조

### 🗂️ **확장 가능한 템플릿 아키텍처**

```
src/lib/three/
├── templates/                    # 새로운 확장 가능한 시스템
│   ├── index.ts                 # 중앙 레지스트리
│   ├── lofi-glass-panels.ts     # 개별 템플릿 파일
│   ├── cyberpunk-neon.ts        # 예시: 새 템플릿
│   └── vintage-film.ts          # 예시: 새 템플릿
├── template-scenes.ts           # 레거시 (마이그레이션 필요)
└── templates.ts                 # 메인 인터페이스
```

### ✅ **올바른 템플릿 추가 방법**
1. `templates/` 폴더에 새 파일 생성 (예: `my-template.ts`)
2. `templates/index.ts`에서 import 후 `TEMPLATE_REGISTRY`에 추가
3. 자동으로 UI에서 사용 가능

### ❌ **잘못된 방법**
- ~~거대한 파일에 모든 템플릿 추가~~
- ~~하드코딩된 템플릿 목록~~
- ~~확장성 없는 구조~~

---

## 🛠️ 인터랙티브 에디터 시스템

### 🎨 **드래그 앤 드롭 구조**
```
InteractiveEditor (도구 선택) 
    ↓
Viewport3D (3D 뷰포트에서 드래그)
    ↓  
SceneManager (3D 씬에 요소 추가)
    ↓
속성 편집 패널 (실시간 업데이트)
```

### 🔧 **속성 편집 기능**
- ✅ **위치**: X, Y 슬라이더로 실시간 이동
- ✅ **크기**: 너비/높이 개별 설정
- ✅ **색상**: 텍스트/도형 색상 실시간 변경
- ✅ **투명도**: 0-100% 슬라이더
- ✅ **텍스트**: 내용, 폰트 크기 (12-72px)

---

## 🏗️ 시스템 아키텍처 원칙

### 📦 **모듈화 구조**
```typescript
// ✅ 올바른 방식: 확장 가능한 레지스트리
export const TEMPLATE_REGISTRY: Template3D[] = [
  template1,
  template2,
  // 새 템플릿들을 여기에 추가
]

// ✅ 동적 등록 시스템
export const registerTemplate = (template: Template3D) => {
  TEMPLATE_REGISTRY.push(template)
}
```

### 🔌 **플러그인 시스템**
- 새 템플릿은 독립적인 파일로 작성
- 중앙 레지스트리에서 자동 관리
- 런타임에도 동적 추가/제거 가능

---

## 💾 데이터 관리

### 🗃️ **SceneManager 데이터 저장**
```typescript
// ✅ 요소별 데이터 저장
private uiElementsData: Map<string, any> = new Map()

// ✅ 실시간 업데이트 지원
public updateUIElement(elementId: string, updates: any)
```

### 🔄 **상태 동기화**
- UI 상태 ↔ SceneManager ↔ 3D 씬
- 모든 변경사항이 실시간으로 동기화
- 메모리 관리 자동화

---

## 🎯 핵심 기능 체크리스트

### ✅ **완료된 기능**
- [x] 확장 가능한 템플릿 시스템 설계
- [x] 드래그 앤 드롭으로 요소 추가
- [x] 실시간 속성 편집 (위치, 크기, 색상, 투명도)
- [x] 텍스트 내용 및 폰트 크기 편집
- [x] 3D 씬과 UI 상태 동기화
- [x] 메모리 관리 및 정리

### 🚧 **진행 중**
- [ ] 레거시 template-scenes.ts 마이그레이션
- [ ] 더 많은 템플릿 추가
- [ ] 고급 애니메이션 효과

---

## 🚨 **개발 시 주의사항**

1. **확장성 체크**: 새 기능을 추가할 때 "이것이 확장 가능한가?" 먼저 확인
2. **모듈화**: 큰 파일은 작은 모듈로 분리
3. **레지스트리 패턴**: 하드코딩 대신 동적 등록 시스템 사용
4. **플러그인 친화적**: 외부에서 기능을 추가할 수 있도록 설계

---

## 🎨 **Lo-fi Glass Panels 템플릿**
스크린샷에서 영감을 받은 새로운 템플릿:
- 일몰 그라디언트 배경
- 투명 유리 패널 효과
- 로파이 미학
- 부드러운 애니메이션

이제 시스템이 완전히 확장 가능합니다! 🚀